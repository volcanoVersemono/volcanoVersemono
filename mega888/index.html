<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Game Log Generator</title>
  <style>
    body { font-family: Arial, sans-serif; padding:20px; }
    table { width:100%; border-collapse:collapse; margin-top:10px;}
    th,td { padding:8px; border:1px solid #ccc; text-align:center;}
    th { background:#0073e6; color:#fff;}
    button { padding:8px 15px; font-size:16px; margin-top:10px; margin-right:10px;
            background:#28a745; color:#fff; border:none; border-radius:5px; cursor:pointer;}
    button:hover { background:#218838;}
    select,input { padding:6px 10px; font-size:16px; margin-left:10px;}
    #nowTime { font-weight:bold; margin-left:10px; color:#0073e6;}
  </style>
</head>
<body>

<h2>Game Log Generator</h2>

<label for="gameSelect">Game:</label>
<select id="gameSelect">
  <option value="Great88">Great88</option>
  <option value="LuckyBall">LuckyBall</option>
  <option value="MegaReel">MegaReel</option>
  <option value="DragonSlot">DragonSlot</option>
  <option value="SevenWin">SevenWin</option>
</select>

<label for="betValue">Bet:</label>
<input type="number" id="betValue" value="2.50" step="0.01" min="0.01" max="9999.99" />

<button onclick="setNow()">Now (Current Time)</button>
<span id="nowTime">No time set</span>

<br><br>
<button onclick="generateLog()">Change</button>

<table id="gameLog">
  <thead>
    <tr>
      <th>GameName</th>
      <th>TableID</th>
      <th>Bet</th>
      <th>Win</th>
      <th>BeginMoney</th>
      <th>EndMoney</th>
      <th>DateTime</th>
    </tr>
  </thead>
  <tbody>
    <!-- Baris Set Score -->
    <tr>
      <td>-</td>
      <td id="setScoreCell" style="color:red;font-weight:bold;">Set score: -0.00</td>
      <td colspan="5"></td>
    </tr>
  </tbody>
</table>

<script>
  let globalTime = null;

  function setNow(){
    const now = new Date();
    globalTime = now.toISOString().replace("T"," ").substring(0,19);
    document.getElementById("nowTime").innerText = globalTime;
  }

  function rnd(min, max, dec = 2){
    return parseFloat((Math.random() * (max - min) + min).toFixed(dec));
  }

  function generateLog(){
    const game = document.getElementById("gameSelect").value;
    const bet = parseFloat(document.getElementById("betValue").value);
    const tbody = document.querySelector("#gameLog tbody");

    tbody.innerHTML = `
      <tr>
        <td>-</td>
        <td id="setScoreCell" style="color:red;font-weight:bold;">Set score: -0.00</td>
        <td colspan="5"></td>
      </tr>
    `;

    let balance = rnd(3000, 4000);
    let endMoneyBaris2 = null;

    for(let i = 0; i < 10; i++){
      const win = Math.random() > 0.7 ? rnd(0, bet * 3) : 0.00;
      const beginMoney = balance;
      const endMoney = parseFloat((beginMoney - bet + win).toFixed(2));
      balance = endMoney;

      if(i === 1) {
        endMoneyBaris2 = endMoney;  // simpan EndMoney baris 2 (indeks 1)
      }

      const timeStamp = globalTime || new Date().toISOString().replace("T"," ").substring(0,19);

      tbody.innerHTML += `
        <tr>
          <td>${game}</td>
          <td>0</td>
          <td>${bet.toFixed(2)}</td>
          <td>${win.toFixed(2)}</td>
          <td>${beginMoney.toFixed(2)}</td>
          <td>${endMoney.toFixed(2)}</td>
          <td>${timeStamp}</td>
        </tr>
      `;
    }

    // Set Score hanya ikut EndMoney baris 2, negatif
    if(endMoneyBaris2 !== null){
      const setScore = -Math.abs(endMoneyBaris2);
      document.getElementById("setScoreCell").innerText = `Set score: ${setScore.toFixed(2)}`;
    }
  }
</script>

</body>
</html>
