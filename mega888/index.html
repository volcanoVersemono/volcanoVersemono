<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Game Log Generator</title>
  <style>
    table {
      border-collapse: collapse;
      width: 100%;
    }
    th, td {
      border: 1px solid #aaa;
      padding: 6px 12px;
      text-align: center;
    }
    th {
      background: #1976d2;
      color: #fff;
    }
    .red {
      color: red;
      font-weight: bold;
    }
  </style>
</head>
<body>
<select id="gameSelect">
  <option value="Great88">Great88</option>
  <option value="SeaWorld">SeaWorld</option>
</select>

<select id="betSelect"></select>

<button onclick="generateLogs()">Change</button>

<table id="gameLogTable">
  <!-- Generated logs will appear here -->
</table>

<h3>Game Log Table</h3>
<table id="gameTable">
  <thead>
    <tr>
      <th>GameName</th>
      <th>TableID</th>
      <th>Bet</th>
      <th>Win</th>
      <th>BeginMoney</th>
      <th>EndMoney</th>
      <th>DateTime</th>
    </tr>
  </thead>
  <tbody id="gameBody"></tbody>
</table>

<script>
const gameName = "Great88";
const tableID = 0;
const betValue = 2.5;
const initialEndMoney = 3167.24;
const logs = 10;
const dateTime = "2025-05-15 06:15:49";

// Win values (bisa diubah sesuai kebutuhan)
const winValues = [0, 1.6, 0, 0, 0, 0, 0, 0, 6.83, 0];

function formatMoney(value) {
  return value.toLocaleString("en-US", { minimumFractionDigits: 2, maximumFractionDigits: 2 });
}

let data = [];
let currentEnd = initialEndMoney;

// Generate backwards
for (let i = 0; i < logs; i++) {
  const win = winValues[i];
  const bet = betValue;
  const endMoney = currentEnd;
  const beginMoney = endMoney + bet - win;
  data.unshift({
    game: gameName,
    table: tableID,
    bet: bet,
    win: win,
    begin: beginMoney,
    end: endMoney,
    time: dateTime
  });
  currentEnd = beginMoney;
}

// Insert Set Score row
const setScoreRow = document.createElement("tr");
setScoreRow.innerHTML = `
  <td>-</td>
  <td class="red">Set score: -${formatMoney(initialEndMoney)}</td>
  <td class="red">-</td>
  <td class="red">-</td>
  <td class="red">-</td>
  <td class="red">-</td>
  <td>${dateTime}</td>
`;
document.getElementById("gameBody").appendChild(setScoreRow);

// Add log rows
data.forEach(row => {
  const tr = document.createElement("tr");
  tr.innerHTML = `
    <td>${row.game}</td>
    <td>${row.table}</td>
    <td>${row.bet.toFixed(2)}</td>
    <td>${row.win.toFixed(2)}</td>
    <td>${formatMoney(row.begin)}</td>
    <td>${formatMoney(row.end)}</td>
    <td>${row.time}</td>
  `;
  document.getElementById("gameBody").appendChild(tr);
});

const gameBets = {
  "Great88": [2.50, 3.00, 5.00],
  "SeaWorld": [1.00, 2.00, 2.50]
};

const gameSelect = document.getElementById("gameSelect");
const betSelect = document.getElementById("betSelect");
const logTable = document.getElementById("gameLogTable");

// Populate bet dropdown when game is selected
gameSelect.addEventListener("change", () => {
  const bets = gameBets[gameSelect.value];
  betSelect.innerHTML = bets.map(b => `<option value="${b}">${b}</option>`).join('');
});

// Initial load
gameSelect.dispatchEvent(new Event("change"));

function generateLogs() {
  const selectedGame = gameSelect.value;
  const selectedBet = parseFloat(betSelect.value);
  const logCount = 10;
  let logs = [];
  let endMoney = getRandomStartMoney(); // misal mulai dari angka acak

  for (let i = 0; i < logCount; i++) {
    const beginMoney = endMoney;
    const win = randomWinAmount(); // bisa 0.00 sampai 3x bet
    endMoney = parseFloat((beginMoney - selectedBet + win).toFixed(2));
    logs.unshift({
      game: selectedGame,
      tableId: 0,
      bet: selectedBet.toFixed(2),
      win: win.toFixed(2),
      begin: beginMoney.toFixed(2),
      end: endMoney.toFixed(2),
      datetime: new Date().toISOString().slice(0, 19).replace('T', ' ')
    });
  }

  // Show Set Score
  const setScore = logs[0].end;
  let html = `<tr>
    <td>-</td><td style="color:red">Set score: -${setScore}</td>
    <td>-</td><td>-</td><td>-</td><td>-</td><td>${logs[0].datetime}</td>
  </tr>`;

  // Append logs
  logs.forEach(log => {
    html += `<tr>
      <td>${log.game}</td><td>${log.tableId}</td><td>${log.bet}</td>
      <td>${log.win}</td><td>${log.begin}</td><td>${log.end}</td><td>${log.datetime}</td>
    </tr>`;
  });

  logTable.innerHTML = html;
}

function getRandomStartMoney() {
  return parseFloat((3000 + Math.random() * 100).toFixed(2));
}

function randomWinAmount() {
  const chance = Math.random();
  return chance < 0.7 ? 0.00 : parseFloat((Math.random() * 3).toFixed(2));
}
</script>

</body>
</html>
